# 数据结构10 图
 

---

这一篇我们要总结的是图(Graph)，图可能比我们之前学习的线性结构和树形结构都要复杂，不过没关系，我们一点一点地来总结。那么关于图，我将从以下几点进行总结：

1、图的定义

2、图相关的概念和术语

3、图的创建和遍历

## 1、图的定义

什么是图呢？

图是一种复杂的非线性结构。

在线性结构中，数据元素之间满足唯一的线性关系，每个数据元素(除第一个和最后一个外)只有一个直接前驱和一个直接后继；

在树形结构中，数据元素之间有着明显的层次关系，并且每个数据元素只与上一层中的一个元素(父节点)及下一层的多个元素(孩子节点)相关；

而在图形结构中，节点之间的关系是任意的，图中任意两个数据元素之间都有可能相关。

图G由两个集合V(顶点Vertex)和E(边Edge)组成，定义为G=(V，E)

## 2、图相关的概念和术语

### 2-1、无向图和有向图

对于一个图，若每条边都是没有方向的，则称该图为无向图。图示如下：

![][1]

因此，(V<sub>i</sub>，V<sub>j</sub>)和(V<sub>j</sub>，V<sub>i</sub>)表示的是同一条边。注意，无向图是用小括号，而下面介绍的有向图是用尖括号。

无向图的顶点集和边集分别表示为：

V(G)={V<sub>1</sub>，V<sub>2</sub>，V<sub>3</sub>，V<sub>4</sub>，V<sub>5</sub>}

E(G)={(V<sub>1</sub>，V<sub>2</sub>)，(V<sub>1</sub>，V<sub>4</sub>)，(V<sub>2</sub>，V<sub>3</sub>)，(V<sub>2</sub>，V<sub>5</sub>)，(V<sub>3</sub>，V<sub>4</sub>)，(V<sub>3</sub>，V<sub>5</sub>)，(V<sub>4</sub>，V<sub>5</sub>)}

对于一个图G，若每条边都是有方向的，则称该图为有向图。图示如下：

![][2]

因此，(V<sub>i</sub>，V<sub>j</sub>)和(V<sub>j</sub>，V<sub>i</sub>)是两条不同的有向边。注意，有向边又称为弧。

有向图的顶点集和边集分别表示为：

V(G)={V<sub>1</sub>，V<sub>2</sub>，V<sub>3</sub>}

E(G)={<V<sub>1</sub>，V<sub>2</sub>>，<V<sub>2</sub>，V<sub>3</sub>>，<V<sub>3</sub>，V<sub>1</sub>>，<V<sub>1</sub>，V<sub>3</sub>>}

### 2-2、无向完全图和有向完全图

我们将具有n(n-1)/2条边的无向图称为无向完全图。同理，将具有n(n-1)条边的有向图称为有向完全图。

### 2-3、顶点的度

对于无向图，顶点的度表示以该顶点作为一个端点的边的数目。比如，图(a)无向图中顶点V<sub>3</sub>的度D(V<sub>3</sub>)=3

对于有向图，顶点的度分为入度和出度。入度表示以该顶点为终点的入边数目，出度是以该顶点为起点的出边数目，该顶点的度等于其入度和出度之和。比如，图(b)中顶点V<sub>1</sub>的入度ID(V<sub>1</sub>)=1，出度OD(V<sub>1</sub>)=2，所以D(V<sub>1</sub>)=ID(V<sub>1</sub>)+OD(V<sub>1</sub>)=1+2=3

不管是无向图还是有向图，边数e、顶点数n和顶点的度数有如下关系：

![][3]

拿图(b)来举例，由公式可以得到图G的边数e=(D(V<sub>1</sub>)+D(V<sub>2</sub>)+D(V<sub>3</sub>))/2=(3+2+3)/2=4

### 2-4、子图

故名思义，这个就不解释了。

### 2-5、路径，路径长度和回路

路径，比如在无向图G中，存在一个顶点序列V<sub>p</sub>，V<sub>i1</sub>，V<sub>i2</sub>，V<sub>i3</sub>…，V<sub>im</sub>，V<sub>q</sub>，使得(V<sub>p</sub>,V<sub>i1</sub>)，(V<sub>i1</sub>,V<sub>i2</sub>)，…，(V<sub>im</sub>,V<sub>q</sub>)均属于边集E(G)，则称顶点V<sub>p</sub>到V<sub>q</sub>存在一条路径。

路径长度，是指一条路径上经过的边的数量。

回路，指一条路径的起点和终点为同一个顶点。

### 2-6、连通图(无向图)

连通图是指图G中任意两个顶点V<sub>i</sub>和V<sub>j</sub>都连通，则称为连通图。比如图(b)就是连通图。下面是一个非连通图的例子：

![][4]

上图中，因为V<sub>5</sub>和V<sub>6</sub>是单独的，所以是非连通图。

### 2-7、强连通图(有向图)

强连通图是对于有向图而言的，与无向图的连通图类似。

### 2-8、网

带”权值”的连通图称为网。如图所示：

![][5]

## 3、图的创建和遍历

### 3-1、图的两种存储结构

1. 邻接矩阵，原理就是用两个数组，一个数组保存顶点集，一个数组保存边集。

2. 邻接表，邻接表是图的一种链式存储结构。这种存储结构类似于树的孩子链表。对于图G中每个顶点V<sub>i</sub>，把所有邻接于V<sub>i</sub>的顶点V<sub>j</sub>链成一个单链表，这个单链表称为顶点V<sub>i</sub>的邻接表。

### 3-2、图的两种遍历方法

1.深度优先搜索遍历

深度优先搜索(DFS)遍历类似于树的前序遍历。其基本思路是：

①假设初始状态是图中所有顶点都未曾访问过，则可从图G中任意一顶点V为初始出发点，首先访问出发点V，并将其标记为已访问过。

②然后依次从V出发搜索V的每个邻接点W，若W未曾访问过，则以W作为新的出发点出发，继续进行深度优先遍历，直到图中所有和V有路径相通的顶点都被访问到。

③若此时图中仍有顶点未被访问，则另选一个未曾访问的顶点作为起点，重复上述步骤，直到图中所有顶点都被访问到为止。

图示如下：

![][6]

注：红色数字代表遍历的先后顺序

如果采用邻接矩阵存储，则时间复杂度为O(n<sup>2</sup>)；如果采用邻接表存储，时间复杂度为O(n+e)

2.广度优先搜索遍历

广度优先搜索遍历(BFS)类似于树的按层次遍历。其基本思路是：

①首先访问出发点V<sub>i</sub>

②接着依次访问V<sub>i</sub>的所有未被访问过的邻接点V<sub>i1</sub>，V<sub>i2</sub>，V<sub>i3</sub>，…，V<sub>it</sub>并均标记为已访问过。

③然后再按照V<sub>i1</sub>，V<sub>i2</sub>，… ，V<sub>it</sub>的次序，访问每一个顶点的所有未曾访问过的顶点并均标记为已访问过，依此类推，直到图中所有和初始出发点V<sub>i</sub>有路径相通的顶点都被访问过为止。

图示如下：

![][7]

因此，图(f)采用广度优先搜索遍历以V<sub>0</sub>为出发点的顶点序列为：V<sub>0</sub>，V<sub>1</sub>，V<sub>3</sub>，V<sub>4</sub>，V<sub>2</sub>，V<sub>6</sub>，V<sub>8</sub>，V<sub>5</sub>，V<sub>7</sub>

如果采用邻接矩阵存储，则时间复杂度为O(n<sup>2</sup>)，如果采用邻接表存储，则时间复杂度为O(n+e)



  [1]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516730223298.jpg
  [2]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516730681397.jpg
  [3]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516731345534.jpg
  [4]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516732192699.jpg
  [5]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516732346259.jpg
  [6]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516733289957.jpg
  [7]: https://www.github.com/nnngu/FigureBed/raw/master/2018/1/24/1516734019011.jpg

